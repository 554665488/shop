{extend name="common/father"/}

<!--页面单独的样式开始-->
{block name="headCss"}{/block}
<!--页面单独的样式结束-->
    {block name='header'}{/block}
        {block name="rightTop"}{/block}
    <!-- 右边主要内容的加载start -->
        {block name="rightMain"}
        <form class="layui-form" action="">
            <div class="ncsc-form-goods">
                <h3 class="js-goods-info">商品信息</h3>
                <dl>
                    <dt><i class="required">*</i>商品分类：</dt>
                    <dd>
                        <div class="extend-name-category-box">
                            <div class="layui-form">
                                <div class="layui-form-item">
                                    <!--<label class="layui-form-label">商品分类</label>-->
                                    <div class="layui-input-inline">
                                        <select name="category_id_1" id="category_id_1" class="js-category-one"
                                                lay-filter="js-category-one">
                                            <option value="">请选择一级分类</option>
                                            {volist name='goodsCateGoryList' id='vo' empty='暂时没有数据'}
                                            <option  {eq name="$vo.category_id" value="$data.category_1.category_id"}selected="selected"{/eq}  value="{$vo.category_id}">{$vo.category_name}</option>
                                            {/volist}
                                        </select>
                                    </div>
                                    <div class="layui-input-inline">
                                        <select name="category_id_2" class="js-category-two" lay-filter="js-category-two">
                                            <option   value="{$data.category_2.category_id}">{$data.category_2.category_name}</option>
                                        </select>
                                    </div>
                                    <div class="layui-input-inline">
                                        <select name="category_id_3" class="js-category-three" lay-filter="js-category-three">
                                            <option   value="{$data.category_3.category_id}">{$data.category_3.category_name}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="clear"></div>
                    </dd>
                </dl>
                <dl>
                    <dt>扩展分类：</dt>
                    <dd id="extend_name_category_box">
                        <div class="extend-name-category-box">
                        </div>
                        <div class="clear">
                            <button class="select-button" onclick="addExtentCategoryBox();"><i
                                    class="fa fa-plus-square"></i>&nbsp;添加
                            </button>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>商品名称：</dt>
                    <dd>
                        <div class="layui-form-item">
                            <div class="layui-input-line">
                                <input type="text" name="goods_name" value="{$data.goods_name}" id="goods_name" required  lay-verify="required|goods_name"  placeholder="请输入商品名称，不能超过60个字" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt>商品促销语：</dt>
                    <dd>
                        <div class="layui-form-item">
                            <div class="layui-input-line">
                                <input type="text" name="introduction" value="{$data.introduction}" id="introduction" required  lay-verify="required|introduction"  placeholder="请输入促销语，不能超过60个字符" autocomplete="off" class="layui-input" >
                            </div>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt>关键词：</dt>
                    <dd>
                        <div class="layui-form-item">
                            <div class="layui-input-line">
                                <input type="text" name="keywords" value="{$data.keywords}" id="keywords" required  lay-verify="required"  placeholder="商品关键词用于SEO搜索,不能超过40个字符" autocomplete="off" class="layui-input" >
                            </div>
                        </div>

                    </dd>
                </dl>
                <dl>
                    <dt>供货商：</dt>
                    <dd style="width: 30%">
                        <div class="layui-form-item">
                            <div class="layui-input-line">
                                <select name="supplier_id" lay-verify="supplier_id" >
                                    <option value="">请选择供货商{$data.supplier_id}</option>
                                    <option value="0">北京</option>
                                    <option value="1">上海</option>
                                    <option value="2">广州</option>
                                    <option value="3">深圳</option>
                                    <option value="4">杭州</option>
                                </select>
                            </div>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt>市场价：</dt>
                    <dd>
                        <div class="layui-form-item">
                            <div class="layui-input-line">
                        <input class="goods_price" type="number" id="market_price" name="market_price" value="{$data.market_price}" min="0" placeholder="0" lay-verify="required"/><em
                            class="add-on">元</em>
                            </div>
                        </div>
                        <!--<span class="help-inline">商品市场不能为空且需是数字</span>-->
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>销售价：</dt>
                    <dd>
                        <input class="goods_price" type="number" id="price" value="{$data.price}" name="price" min="0" placeholder="0"/><em
                            class="add-on">元</em>
                        <span class="help-inline">商品现价不能为空且需是数字</span>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>商品促销价格：</dt>
                    <dd>
                        <input class="goods_price" type="number" id="promotion_price" value="{$data.promotion_price}" name="promotion_price" min="0" placeholder="0"/><em
                            class="add-on">元</em>
                        <span class="help-inline">商品现价不能为空且需是数字</span>
                    </dd>
                </dl>
                <dl>
                    <dt>成本价：</dt>
                    <dd>
                        <input class="goods_price" type="number" id="cost_price" name="cost_price" value="{$data.cost_price}" min="0" placeholder="0"/><em
                            class="add-on">元</em>
                        <span class="help-inline">商品成本不能为空且需是数字</span>
                    </dd>
                </dl>
                <dl>
                    <dt>基础销量：</dt>
                    <dd>
                        <input type="number" class="span1" id="base_sales"  name="base_sales"  placeholder="0" value="{$data.base_sales}"/>
                        <span class="help-inline">基础销量需是数字</span>
                    </dd>
                </dl>
                <dl>
                    <dt>基础点击数：</dt>
                    <dd>
                        <input type="number" class="span1" id="base_clicks" name="base_clicks" value="{$data.base_clicks}" placeholder="0"/>
                        <span class="help-inline">基础点击数需是数字</span>
                    </dd>
                </dl>
                <dl>
                    <dt>基础分享数：</dt>
                    <dd>
                        <input type="number" class="span1" id="shares" name="shares" value="{$data.shares}" placeholder="0"/>
                        <span class="help-inline">基础分享数需是数字</span>
                    </dd>
                </dl>
                <dl>
                    <dt>商家编码：</dt>
                    <dd>
                        <input type="text" id="code" name="code" value="{$data.code}" placeholder="请输入商家编码"/>
                        <span class="help-inline">请输入商家编码，不能超过40个字符</span>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>总库存：</dt>
                    <dd>
                        <input type="number" class="goods-stock" id="stock"  name="stock" min="0" value="{$data.stock}"/>
                        <span class="help-inline">请输入总库存数量，必须是大于0的整数</span>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>库存预警：</dt>
                    <dd>
                        <input type="number" class="goods-stock" id="min_stock_alarm" name="min_stock_alarm" min="0" value="{$data.min_stock_alarm}"/>
                        <span class="help-inline">请输入库存预警数，必须是大于0的整数</span>
                        <p class="hint">设置最低库存预警值。当库存低于预警值时商家中心商品列表页库存列红字提醒。<br>0为不预警。</p>
                    </dd>
                </dl>

                <h3 class="js-goods-type">商品类型</h3>
                <dl>
                    <dt>商品类型{$data.goods_attribute_id}：</dt>
                    <dd>
                        <select id="goods_attribute_id" name="goods_attribute_id" lay-verify="required" >
                            <option value="0">请选择商品类型</option>
                            <option selected value="28">衣服</option>
                            <option value="30">手机</option>
                            <option value="32">鞋子</option>
                        </select>
                    </dd>
                </dl>
                <dl>
                    <dt><span class="color-red"></span></dt>
                    <dd>
                        <table class="goods-sku js-goods-sku"></table>
                    </dd>
                </dl>
                <!--<dl class="control-group js-spec-table" name="skuTable" style="display: none;">-->
                    <!--<dt><span class="color-red"></span>商品库存：</dt>-->
                    <!--<dd>-->
                        <!--<div class="controls">-->
                            <!--<div class="js-goods-stock control-group" style="font-size: 14px; margin-top: 10px;">-->
                                <!--<div id="stock-region" class="sku-group">-->
                                    <!--<table class="table-sku-stock">-->
                                        <!--<thead></thead>-->
                                        <!--<tbody></tbody>-->
                                        <!--<tfoot></tfoot>-->
                                    <!--</table>-->
                                <!--</div>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</dd>-->
                <!--</dl>-->
                <!--<dl class="control-group js-goods-attribute-block" style="display:none;">-->
                    <!--<dt><span class="color-red"></span>商品属性：</dt>-->
                    <!--<dd>-->
                        <!--<div class="controls">-->
                            <!--<table class="goods-sku-attribute js-goods-sku-attribute" style="margin:0;"></table>-->
                        <!--</div>-->
                    <!--</dd>-->
                <!--</dl>-->

                <h3 class="js-goods-img">商品图片</h3>
                <dl>
                    <dt><i class="required">*</i>商品图片：</dt>

                    <dd>
                        <div id="goods_picture_box" class="controls"
                             style="background-color:#FFF;border: 1px solid #E9E9E9;">
                            <div class="ncsc-goods-default-pic">
                                {include file='common/UploadImg'}
                                <!--<div class="goodspic-uplaod" style="padding: 15px;">-->
                                    <!--<div class='img-box' style="min-height:160px;">-->
                                        <!--<div class="upload-thumb" id="default_uploadimg">-->
                                            <!--<img src="../../static/picture/default_goods_image_240.gif">-->
                                        <!--</div>-->
                                    <!--</div>-->
                                    <!--<div class="clear"></div>-->
                                    <!--<span class="img-error">最少需要一张图片作为商品主图</span>-->
                                    <!--<p class="hint">上传商品图片，<font color="red">第一张图片将作为商品主图</font>,支持同时上传多张图片,多张图片之间可随意调整位置；支持jpg、gif、png格式上传或从图片空间中选择，建议使用尺寸800x800像素以上、大小不超过1M的正方形图片，上传后的图片将会自动保存在图片空间的默认分类中。-->
                                    <!--</p>-->
                                    <!--<div class="handle">-->
                                        <!--<div class="ncsc-upload-btn">-->
                                            <!--<a href="javascript:void(0);">-->
                                        <!--<span>-->
                                            <!--<input style="cursor:pointer;font-size:0;" type="file" id="fileupload"-->
                                                   <!--hidefocus="true" class="input-file" name="file_upload"-->
                                                   <!--multiple="multiple"/>-->
                                        <!--</span>-->
                                                <!--<p>图片上传</p>-->
                                            <!--</a>-->
                                        <!--</div>-->
                                        <!--<a class="ncsc-btn mt5" id="img_box" nctype="show_image" href="javascript:void(0);">从图片空间选择</a>-->
                                    <!--</div>-->
                                <!--</div>-->
                                <!--<a class="ncsc-btn mt5" id="img_box" nctype="show_image" href="javascript:void(0);">从图片空间选择</a>-->
                            </div>
                        </div>
                        <span class="help-inline">最少需要一张图片作为商品主图第一张图片将作为商品主图</font>,支持同时上传多张图片,多张图片之间可随意调整位置；支持jpg、gif、png格式上传或从图片空间中选择，建议使用尺寸800x800像素以上、大小不超过1M的正方形图片，上传后的图片将会自动保存在图片空间的默认分类中</span>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required"></i>规格图片：</dt>
                    <dd>
                        <!--<div class="sku-picture-div">-->
                            <!--<span class="sku-picture-span sku-picture-active">颜色</span>-->
                            <!--<span class="sku-picture-span">尺码</span>-->
                            <!--<span class="sku-picture-span">款式</span>-->
                        <!--</div>-->
                        <!--<div class="clear"></div>-->
                    </dd>
                </dl>


                <h3 class="js-goods_detail">商品详情{$data.brand_id}</h3>
                <dl>
                    <dt>商品品牌：</dt>
                    <dd>
                        <select id="brand_id" name="brand_id">
                            <option value="0">请选择商品品牌</option>
                            <option value="10">乐视</option>
                        </select>
                        <span class="help-inline">请选择商品品牌</span>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>商品描述：</dt>
                    <dd>
                        <div class="controls" id="discripContainer">
                            <!-- 加载编辑器的容器 -->
                            <script id="container_edit" name="description" type="text/plain">
                                      {:htmlspecialchars_decode($data.description)}
                            </script>

                            <span class="help-inline">请填写商品描述</span>
                        </div>
                    </dd>
                </dl>

                <h3 class="js-goods-express-info">商品物流信息</h3>
                <dl>
                    <dt>所在地：</dt>
                    <dd>
                        <select  id="province_id" name="province_id" onchange="getProvince(this,'#citySelect',-1)">
                            <option  value="0">请选择省{$data.province_id}</option>
                        </select>
                        <select id="city_id" name="city_id">
                            <option value="0">请选择市{$data.city_id}</option>
                        </select>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>运费{$data.shipping_fee}：</dt>
                    <dd>
                        <div class="controls">
                            <label class="radio inline normal"><input {eq name="$data.shipping_fee" value="0"} checked="checked"{/eq} type="radio" name="shipping_fee" value="0" />免邮</label>
                            <label class="radio inline normal"><input {eq name="$data.shipping_fee" value="1"} checked="checked" {/eq} type="radio" name="shipping_fee" value="1"/> 买家承担运费</label>
                            <!--<span class="help-inline">请选择运费类型</span>-->
                        </div>
                    </dd>
                </dl>
                <dl id="valuation-method" >
                    <dt><i class="required">*</i>计价方式{$data.shipping_fee_type}：</dt>
                    <dd>
                        <label class="radio inline normal"><input {eq name="$data.shipping_fee_type" value="3"} checked="checked" {/eq} type="radio" name="shipping_fee_type" value="3"
                                                                  />计件</label>
                        <label class="radio inline normal"><input {eq name="$data.shipping_fee_type" value="2"} checked="checked" {/eq} type="radio" name="shipping_fee_type"
                                                                  value="2"/>体积</label>
                        <label class="radio inline normal"><input {eq name="$data.shipping_fee_type" value="1"} checked="checked" {/eq} type="radio" name="shipping_fee_type"
                                                                  value="1"/>重量</label>
                    </dd>
                </dl>
                <dl id="commodity-weight" >
                    <dt><i class="required">*</i>商品重量：</dt>
                    <dd>
                        <input type="number" id="goods_weight" name="goods_weight" min="0" value="{$data.goods_weight}"/>公斤
                        <span class="help-inline">商品重量必须大于0</span>
                    </dd>
                </dl>
                <dl id="commodity-volume">
                    <dt><i class="required">*</i>商品体积：</dt>
                    <dd>
                        <input type="number" id="goods_volume" name="goods_volume" min="0" value="{$data.goods_volume}"/>立方米
                        <span class="help-inline">商品体积必须大于0</span>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>页面是否显示库存{$data.is_stock_visible}：</dt>
                    <dd>
                        <div class="controls">
                            <label class="radio inline normal"><input {eq name="$data.is_stock_visible" value="1"}checked="checked" {/eq} type="radio" name="is_stock_visible"
                                                                      value="1"/> 是</label>
                            <label class="radio inline normal"><input {eq name="$data.is_stock_visible" value="0"}checked="checked" {/eq} type="radio" name="is_stock_visible" value="0"/> 否</label>
                            <!--<span class="help-inline">请选择库存是否显示</span>-->
                        </div>
                    </dd>
                </dl>

                <h3 class="js-goods-point">积分购买设置{$data.point_exchange_type}</h3>
                <dl>
                    <dt><i class="required">*</i>积分设置：</dt>
                    <dd>
                        <div class="controls">
                            <label class="radio inline normal"><input type="radio" {eq name="$data.is_stock_visible" value="0"} checked="checked" {/eq} name="point_exchange_type" value="0"
                                                                      /> 非积分兑换</label>
                            <label class="radio inline normal"><input {eq name="$data.is_stock_visible" value="1"} checked="checked" {/eq} type="radio" name="point_exchange_type"
                                                                      value="1"/>积分兑换</label>
                        </div>
                    </dd>
                </dl>
                <!--<dl id="integral-exchange" style="display: none">-->
                    <!--<dt>积分兑换：</dt>-->
                    <!--<dd>-->
                        <!--<div class="controls">-->
                            <!--<input id="point_exchange" name="point_exchange" class="input-mini" placeholder="0" min="0" type="number"-->
                                   <!--onchange="integrationChange(this);"/>&nbsp;积分-->
                            <!--&lt;!&ndash;<span class="help-inline">请设置积分</span>&ndash;&gt;-->
                        <!--</div>-->
                    <!--</dd>-->
                <!--</dl>-->
                <dl>
                    <dt>购买可赠送：</dt>
                    <dd>
                        <div class="controls">
                            <input id="give_point" name="give_point" class="input-mini" placeholder="0" min="0" type="number"
                                   onchange="integrationChange(this);"/>&nbsp;积分
                        </div>
                    </dd>
                </dl>

                <h3 class="js-goods-other">其他信息</h3>
                <div class="js-mask-category"
                     style="position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; right: 0px; bottom: 0px; z-index: 90; display: none; background: rgba(0, 0, 0, 0);"></div>
                <dl>
                    <dt>商品标签数据库没有设计：</dt>
                    <dd>
                        <div class="group-text-check-box">
                            <div class="controls product-category-position">
                                <div class="productcategory-selected" id="productcategory-selected"></div>
                                <button class="gruop-button" onclick="showGoodsGroup();"><i class="fa fa-plus-square"></i>&nbsp;添加商品标签
                                </button>
                                <div class="goods-gruop-div">
                                    <select class="goods-gruop-select">
                                        <option value="107"> 女装</option>
                                        <option value="108">连衣裙</option>
                                        <option value="109">男装</option>
                                        <option value="110">平板</option>
                                        <option value="111">分组添加测试</option>
                                        <option value="112">手机</option>
                                        <option value="113">电器</option>
                                    </select>
                                    <button class="check-button" onclick="checkGoodsGroup();">确认</button>
                                </div>
                                <!--<span class="span-error">暂无可选的商品标签</span>-->
                            </div>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt>每人限购(0不限购)：</dt>
                    <dd>
                        <div class="controls">
                            <input type="number" name="max_buy" class="input-mini" min="0" placeholder="0" value="{$data.max_buy}" id="PurchaseSum"/>
                            <span class="help-inline">件</span>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>是否上架{$data.shelves}：</dt>
                    <dd>
                        <div class="controls">
                            <label class="radio inline normal"><input {eq name="$data.shelves" value="1"} checked="checked" {/eq} type="radio" name="shelves" value="1"
                                                                      checked="checked"/> 立刻上架</label>
                            <label class="radio inline normal"><input {eq name="$data.shelves" value="0"} checked="checked" {/eq} type="radio" name="shelves" value="0"/> 放入仓库</label>
                        </div>
                    </dd>
                </dl>
                <input type="hidden" id="sort" value="0"/>
                <div class="btn-submit">
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <input type="hidden" name="__token__" value="{$Request.token}" />
                            <input type="hidden" name="goods_id" value="{$data.goods_id}" />
                            <button class="layui-btn" lay-submit lay-filter="editGoods">立即提交</button>
                        </div>
                    </div>
                    <!--<button class="btn btn-info" id="btnSave2" type="button">保存并预览</button>-->
                    <!--<button class="btn btn-info" id="btnSave" type="button"-->
                            <!--onClick="SubmitProductInfo(0,'http://tp.23673.com/admin','http://tp.23673.com')">保存-->
                    <!--</button>-->
                    <!--<button class="btn btn-info" id="btnSave2" type="button"-->
                            <!--onClick="SubmitProductInfo(1,'http://tp.23673.com/admin','http://tp.23673.com')">保存并预览-->
                    <!--</button>-->
                </div>
            </div>
        </form>
        {/block}
    <!-- 右边主要内容的加载end -->
{block name="footerJs"}
<!--<script src="__PUBLIC__/js/ns_common_base.js"></script>-->
<script src="__PUBLIC__/admin/js/goods_edit.js__VERSION__"></script>
<script src="__PUBLIC__/plugin/ueditor1_4_3_3-utf8-php/ueditor.config.js__VERSION__"></script>
<script src="__PUBLIC__/plugin/ueditor1_4_3_3-utf8-php/ueditor.all.js__VERSION__"></script>
<!-- 实例化编辑器 -->
<script type="text/javascript">
    var editor = UE.getEditor('container_edit');
    editor.ready(function(){
        // editor.setContent("{$data.description}");
    })
</script>
{/block}